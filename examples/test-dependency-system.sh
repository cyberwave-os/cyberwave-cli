#!/bin/bash

# Test Dependency System
# Simple test to verify the dependency management system works

echo "üß™ Testing Dependency Management System"
echo "======================================="

# Test 1: Check if CLI is available
echo "1Ô∏è‚É£ Testing CLI availability..."
if command -v cyberwave &> /dev/null; then
    echo "‚úÖ Cyberwave CLI found"
    cyberwave --version
else
    echo "‚ùå Cyberwave CLI not found"
    echo "Install with: pip install cyberwave-cli"
    exit 1
fi

# Test 2: Check device listing
echo ""
echo "2Ô∏è‚É£ Testing device listing..."
if cyberwave edge devices; then
    echo "‚úÖ Device listing works"
else
    echo "‚ùå Device listing failed"
fi

# Test 3: Check dependency checking
echo ""
echo "3Ô∏è‚É£ Testing dependency checking..."
echo "Checking camera dependencies:"
if cyberwave edge check-deps --device camera/ip; then
    echo "‚úÖ Camera dependency check works"
else
    echo "‚ö†Ô∏è Camera dependency check completed (some deps may be missing)"
fi

echo ""
echo "Checking robot dependencies:"
if cyberwave edge check-deps --device robot/so-101; then
    echo "‚úÖ Robot dependency check works"
else
    echo "‚ö†Ô∏è Robot dependency check completed (some deps may be missing)"
fi

# Test 4: Check feature dependencies
echo ""
echo "4Ô∏è‚É£ Testing feature dependency checking..."
if cyberwave edge check-deps --feature computer_vision; then
    echo "‚úÖ Feature dependency check works"
else
    echo "‚ö†Ô∏è Feature dependency check completed (some deps may be missing)"
fi

# Test 5: Test dependency installation (dry run)
echo ""
echo "5Ô∏è‚É£ Testing dependency installation help..."
echo "Camera installation command:"
echo "  cyberwave edge install-deps --device camera/ip"
echo ""
echo "Robot installation command:"
echo "  cyberwave edge install-deps --device robot/so-101"

echo ""
echo "‚úÖ All tests completed!"
echo ""
echo "üí° To actually install dependencies, run:"
echo "   ./examples/02-install-dependencies.sh"
